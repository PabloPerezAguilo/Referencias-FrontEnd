<script type="text/ng-template" id="nodes_renderer.html">

    <div ui-tree-handle class="{{node.clase}} tree-node tree-node-content" ng-click="seleccionarElemento(this, node)" id="{{node.nombre}}">
        <a class="btn btn-success btn-xs flechaAyuda" ng-if="node.nodosHijos && node.nodosHijos.length > 0" data-nodrag ng-click="toggle(this)">
            <span class="glyphicon"
                ng-class="{
                    'glyphicon-chevron-right': collapsed,
                    'glyphicon-chevron-down': !collapsed}">
            </span>
          </a>
        {{node.nombre}}
        <a class="pull-right btn btn-danger btn-xs borrarAyuda"
           data-nodrag
           ng-click="eliminarElem($event, this)"
           ng-if="this.$parentNodeScope != undefined">
            
            <span class="glyphicon glyphicon-remove"></span>
        </a>
        <a class="pull-right btn btn-primary btn-xs btnAniadirNodo btnAniadir nodoAyuda" data-nodrag ng-click="aniadirElem($event, this, 'nodo')"  ng-if="node.clase=='nodo' || node.clase=='raiz'">
            <span class="glyphicon glyphicon-plus"></span>
        </a>
        <a class="pull-right btn btn-success btn-xs btnAniadir hojaAyuda" data-nodrag ng-click="aniadirElem($event, this, 'hoja')" style="margin-right: 8px;" ng-if="node.clase=='nodo' || node.clase=='raiz'">
            <span class="glyphicon glyphicon-plus"></span>
        </a>
    </div>
    <ol ui-tree-nodes="" ng-model="node.nodosHijos" ng-class="{hidden: collapsed}">
        <li ng-repeat="node in node.nodosHijos" ui-tree-node data-nodrop-enabled="node.clase!=='nodo'" ng-include="'nodes_renderer.html'"></li>
    </ol>
</script>
<h1 class="cabeceraPagina">Gestion de tecnologias</h1>
<div class="row">
    <div class="col-sm-6">
        <div ui-tree="eventosArbol" id="tree-root" data-drag-delay="250" >
          <ol ui-tree-nodes ng-model="data">
            <li ng-repeat="node in data" ui-tree-node ng-include="'nodes_renderer.html'"></li>
          </ol>
        </div>
    </div>
    <div class="col-sm-6">
        <div ng-hide="nodoSeleccionado==null || nodoSeleccionado.clase=='raiz'" id="datosTecnologia">
            <form name="datosNodo">
                <div>
                    <div id=tituloDatosTecnologia>{{titulo}}</div><br>
                    <md-input-container>
                        <label>Nombre</label>
                        <input type="text"ng-model="nodoSeleccionado.nombre" ng-required="true">
                    </md-input-container>
                </div>
                <div ng-if="nodoSeleccionado.clase!=='nodo'">

                    <div>
                        <md-input-container>

                            <label>Tipo</label>
                        <md-select ng-model="nodoSeleccionado.tipo">
                          <md-option ng-repeat="tipo in tipos" value="{{tipo}}">
                            {{tipo}}
                          </md-option>
                        </md-select>
                        <div>
                            <md-checkbox ng-model="nodoSeleccionado.producto">Producto</md-checkbox>
                        </div>
                        <div>
                            <md-checkbox ng-model="estaValidado" ng-disabled="true">Validado</md-checkbox>
                        </div>
                      </md-input-container>
                    </div>
                </div>
                <md-button class="botonesApp" type="button"  ng-click="guardarElem()"
                           ng-disabled="datosNodo.$invalid">Guardar</md-button>
                <md-button class="botonesApp" ng-show="true && (nodoSeleccionado.clase=='hojaInvalida')" type="button"  ng-click="validarElem()">Validar</md-button>
            </form>
        </div>
    </div>
</div>

